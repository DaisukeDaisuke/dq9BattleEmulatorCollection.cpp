## dq9BattleEmulatorCollection.cpp

dq9のRTA用バトルエミュレーター  


## how to build
Please build with [jetBrains clion](https://www.jetbrains.com/ja-jp/clion/) using cmake, ninja, or mingw.  
[jetBrains clion](https://www.jetbrains.com/ja-jp/clion/)のデフォルト設定(mingw)向けで作られています。なのでclionとかいうペイウォールさえ突破できればビルドできます。  

[稀に不安定なバージョンを無料で使えたりする](https://www.jetbrains.com/ja-jp/clion/nextversion/)ので、それでビルドするのはありかもしれません。ストレージめっちゃ食うけど

また、erugiosu以降では、様々な機能を取り込みつつ、c++17水準で書かれており、幅広い環境、例えば、virtual studio(cmakeサポート)
、msbuild(with cmake)での静的ビルドに対応しています。  
このリポジトリ全体の制約として、windows.hは使ってません。なのでLinux等でもビルドできると思いますが、Linuxのg++についてはいまのところ正式にはサポートしていません。

本番exeのビルドについては、Github Actionsでビルドすることになっています。  
一部の配布物はわざと配布してないことがあるので、その場合は(Github Actionsを他人のリポジトリで使う方法を知っていれば)
、自由にクラウド、またはローカルでビルドできます。  
コマンドラインでのビルド方法は各ブランチのワークフローファイル見てください。

## hou to add argc on vs22

`./.vs/launch.vs.json`をエクスプローラーで表示設定にして直接編集するか  
`デバック > [rbe_multi]デバックおよび機能の設定`でlaunch.vs.jsonを開き、  
デフォルトで生成されているjosnに下記の位置でargsカラムを追加します。
そしてctrl+Sで保存してcmakeを再読み込みすれば、argc付きで起動するようになります

```json
{
  "version": "0.2.1",
  "defaults": {},
  "configurations": [
    {
      "type": "default",
      "project": "CMakeLists.txt",
      "projectTarget": "rbe_multi.exe",
      "name": "rbe_multi.exe",
      "args": ["0", "2", "26", "26", "r", "21", "32", "r", "b", "b", "22", "35", "b", "23", "36", "0", "22", "h"]
    }
  ]
}
```

## branches
ブランチ紹介

### bilyouma

9一人旅用 病魔パンデルム用バトルエミュ。対応するレベルなど、詳細は後日記述します。   
マルチスレッド対応(4コア)
や、ボトルネックの緩和策の実装、AddressSanitizerでのバグチェックなど、新機能を大量に取り入れています。   
いまのところ入力文字列(引数)は未定です。

### erugiosu
エルギオス僧侶レベル50のグリーンタイツバトルエミュです。debug.hのフラグが全て折られている場合、対話型プログラムとして起動します。  
モードは、ブルートフォースリクエストのbオプションとプログラムを終了するqオプションのみです。  
```
b 7 42 15 5 1 2 2 15 17 12 10 9 9 8 41-30 31 30 35 35-1 5 9 54 237 245 0-
```
プログラムは+-30秒に相当する3000万シードを4秒で検索し、探索アルゴリズムは300候補を1秒間で調べます。非常に高速です。
このプログラムは7時間のような長期実行に対応しました。

### yo2
イシュダルの旅芸人レベル11 一人旅RTA装備用バトルエミュです。このブランチは最新のバグパッチが適応されています。  
デフォルトで総当たりモードになってたりなかったりします。総当たりモードにするには、debug.hのフラグを全て折ってください。   
i7 6700kでは総当たり(+-1.5秒)に0.3秒かかります。最新のcpuだと0.15秒程度しかかからないらしいです(最適化で爆速化に成功した)  

#### 引数解説
```
0 3 48 18 10 9 18 10 17 17 18 10 h 
```

- 1個目: X時間 (戦闘開始時の画面がひねるエフェクトが発生した時のリアルタイムタイマー、ライブスピリットとの誤差-15秒+-1秒想定です。)  
- 2個目: Y分  
- 3個目: Z秒  
- 4個目以降: ダメージ値。0ダメージの場合入力せず、ホイミはhです。

※2時間15分を越えるとバグって絶対に特定できない仕様があります。どちらかというとバグですが、あんまり影響ないのであえて放置します。  


### Q
VS版を実行しようとすると`VCRUNTIME140.dll`がなんちゃらって言われて動かないんだけど

### A
これを入れてください。virtual studio 22(MsBuild)でビルドしたc++実行可能バイナリはこれないと動きません。
mingw版(非公開)を実行する場合不要です。
```
https://aka.ms/vs/17/release/vc_redist.x64.exe
```


https://github.com/DaisukeDaisuke/dq9BattleEmulatorCollection.cpp/tree/yo2


### buru_BruteForce

ブルドーガのバトルエミュレーターです。yo2では修正されたバグを何個か抱えてますが、動作に問題ないので放置してます。  
レベル1討伐とかで役に立つのに完全にリアルタイムタイマーとの誤差特定用になってます。  

https://github.com/DaisukeDaisuke/dq9BattleEmulatorCollection.cpp/tree/buru_BruteForce


### 追加要件

- 許可なく自作発言禁止(自作発言は一部の人のみ許可しています)
- これを使用したことによる実行したコンピーターやds、またはバグなどのミスによる不利益、損傷、または意図した通りに動作するかどうかについては一切保証せず、現状のままでの提供になります。これはバグ報告を制限するものではなく、自由にissueで報告することができます。
  - また、mingw版は悪意のあるプログラムと誤検知されるため配布する予定はありません。フォークしてvs版をGithub Actionsでビルドするか、クローンしてclionを使って各自でビルドしてください。
  - exeをVenusTotalにかけるなど、万全を期していますが、vs版や、mingw版(非公開)を実行した場合、プログラムに悪意のあるプログラムが混じっている可能性があることに同意することとします。
